![comp](./images/nishika_prediction_of_second-hand_apartment_2022winter.png)
# nishika_prediction_of_second-hand_apartment_2022winter
NISHIKA-中古マンション価格予測 2022冬の部 コンペのリポジトリ

- result
  - public: 0.000
  - private: 0.000
  - rank: 0000/9999

    <img src='./images/ranking.png' width='500'>



- directory tree
```
nishika_prediction_of_second-hand_apartment_2022winter
├── README.md
├── data         <---- nishika提供データ
├── images       <---- readme用画像
├── program      <---- jupyter lab用ノートブック
      ├──std     <---- post時のノートブック
      ├──edit    <---- 作業用ノートブック
```

## Pipeline
- 実行例
  ```bash
  #python3 pipeline.py --globals.balanced=1 --globals.comment=test
  ```

- 結果の表示例
  ```bash
  #python3 show_result.py -d 0
  ```



## Info
- [issue board](https://github.com/ys-0601/nishika_prediction_of_second-hand_apartment_2022winter/projects/1)   <---- これ大事だよ
- ref:


## Timeline

<img src='./images/timeline.png' width='1000'>

## External Dataset
|Name|Detail|Ref|
|---|---|---|
|prefecture_rank.csv|公示地価（国交省）データ。住居表示から都道府県名のみ取り出し、都道府県名別にR3価格の平均値を算出＞値の昇順にしたものがrankingシート|./data/prefecture_rank.xlsx|

## Modularized file
|Name|Detail|In|Out|
|---|---|---|---|
|df_pre.py|DataFrameからlightgbt用特徴量作成処理をモジュール化したもの。|DataFrame(処理前)|DataFrame(処理後)|

## Features
|Name|structure|type|Detail|
|---|---|---|---|
|市区町村コード|692882 non-null|int64|市区長村のコード。未処理。unique|
|都道府県名_num|692882 non-null|int32|都道府県を、県別地価ランク順にナンバリングしたもの。|
|地区名|692221 non-null|object|地区名データ。未処理。|
|最寄駅：名称|690187 non-null|object|最寄り駅名。未処理。|
|最寄駅：距離（分）_min|669761 non-null|float64|最寄り駅までの距離。30~60/60~90/90~120/120~とラベルされていたものはそれぞれ45/75/105/120とラベルし直した。|
|間取り|668450 non-null|object|間取りデータ。未処理。|
|面積（㎡）_num|692882 non-null|int32|面積データを数値型に変換。|
|建築年_year|672808 non-null|float64|建築年データを建築からの経過年数に変換。|
|建物の構造_num|675496 non-null|float64|建物の構造データ。高強度を5、低強度を1として数値型変換。|
|用途|630269 non-null|object|用途データ。未処理。|
|今後の利用目的|328144 non-null|object|今後の利用目的データ。未処理。|
|都市計画|673457 non-null|object|年計画データ。未処理。|
|建ぺい率（％）|669257 non-null|float64|建ぺい率データ。未処理。|
|容積率（％）|669257 non-null|float64|容積率データ。未処理。|
|取引時点_num|692882 non-null|float64|取引時点データ。年度を４半期まで分けて数値データ化。|
|改装|628856 non-null|object|改装データ。未処理。|
|取引の事情等|18679 non-null|object|取引の事情データ。未処理。|
|取引価格（総額）_log|692882 non-null|float64|目的変数。|



## Paper/Reference
|No.|Status|Name|Detail|Date|Url|
|---|---|---|---|---|---|
|00|<font color='orange'>Todo</font>|Kaggle日記という戦い方|kaggle日記参照元。|2021/06|[url](https://zenn.dev/fkubota/articles/3d8afb0e919b555ef068)|
|01|<font color='gray'>Doing</font>|LightGBMの俺用テンプレート|lightgbmテンプレ。optuna実装方法有。|2019/10|[url](https://qiita.com/dev_fukuro/items/2235fbe026622438989d)|
|02|<font color='gray'>Doing</font>|コンペ用LightGBMの実装(Classification)|lightGBMテンプレ。交差検証＋特徴量重要度表示方法有。|2020/11|[url](https://www.sairablog.com/article/lightgbm-sklearn-kaggle-classification.html)|
|03|<font color='gray'>Done</font>|kaggleでよく使う交差検証テンプレ(LightGBM向け)
|交差検証(複数種類)テンプレ|2021/11|[url](https://amateur-engineer-blog.com/kaggle-cv-template-lightgbm/)|
|04|<font color='orange'>Todo</font>|LightGBM(gbdt)のパラメータ/Tuningの個人的まとめ|lightGBMのパラメータまとめ|2020/09|[url](https://zenn.dev/mosamosa/articles/07d0076c9292136a3639)|
|05|<font color='orange'>Todo</font>|---|---|---|[url]()|
|06|<font color='gray'>Doint</font>|---|---|---|[url]()|
|07|<font color='gray'>Done</font>|---|---|---|[url]()|

## Memo
- term
  - nb: ノートブック
  - ----


## Basics
**背景と目的**

定期開催コンペ「中古マンション価格予測 2022冬の部」

本コンペは2021年1-3月に開催した「中古マンション価格予測」を、以後四半期に一度、定期的に開催しているコンペとなります。過去コンペからデータが更新されている点にご注意ください。
より多くの皆様にコンペをお楽しみいただくため、過去の「中古マンション価格予測」コンペで1-3位にご入賞された方は、賞金/賞品の授与・最終ランキング対象外とさせていただいております。ご理解のほど、賜れますと幸いです。

国内中古マンションの価格推定に挑戦！

本コンペティションのテーマは国内の中古マンションの価格推定です。
皆さん御存知の通り、マンションに限らず不動産価格の推定は需要と供給だけではなく、市況や金融政策、人口動態の変化などの影響も受けるため、価格決定の要因が複雑怪奇に入り組んでおり高精度の推定は難易度が高いタスクです。
一方で、不動産売買の歴史は古く、関連データも膨大に蓄積されているため、機械学習とは相性が良い分野です。実際に、中古マンションに限らずAI・機械学習による不動産価格推定の事例やサービスは快挙に暇がないほど無数にあるとも言えます。
本コンペティションのデータは、Nishikaにて土地総合情報システムより取得・加工した独自データを提供いたしますが、これ以外のオープンデータについても利用可能です。
※オープンデータの利用についてはコンペのルール・参加規約をご確認ください。
AI・機械学習による不動産価格推定は、古くから取り組まれている一方で、日進月歩で研究開発が進んでいる分野でもあります。また、不動産の購入・投資の経験のあるユーザーや、専門知識を持つユーザーや不動産投資には一家言あるユーザーの方も多いのでは無いかと思います。先端知識と実体験から養われた肌感覚を合わせた創意工夫により、新たな推定エンジンの開発に挑んで頂ければと思います。
利用データ
Nishikaにて土地総合情報システムより収集・加工し作成したものです。

**data(deepL)**   
ファイル内容
train.zip
 └─*.csv	2021年第1四半期より前に取引された中古マンションの価格データ
test.csv	2021年第1四半期、2021第2四半期に取引された中古マンションの価格データ
sample_submission.csv	投稿データフォーマット

カラム内容に関しては、データ説明ファイル(data_explanation.xlsx)をご参照ください
データ説明ファイルを含む各データはコンペに参加することでダウンロードが可能になります

### train.csv colomn infomaiton
notebook: eda01.ipynb
example: https://panasonic-cns.udemy.com/course/python-data/learn/lecture/25769636?start=0#content

|name|Explanation|Detail|
|----|----|----|----|
|ID|取引ID|
|種類|不動産の種類||
|地域|周辺地域の状況※本データではnull||
|市区町村コード|市区町村コード||
|都道府県名|都道府県名||
|市区町村名|市区町村名||
|地区名|地区名||
|最寄駅：名称|最寄りの鉄道駅の名称||
|最寄駅：距離（分）|当該地から最寄りの鉄道駅（地下駅の場合には地表への出入口）までの時間距離（分）||
|間取り|"専有部分の間取りを表示しています。なお、間取りが把握できないものは、空欄になっています。
例）
１Ｋ・１ＤＫ・２ＤＫ・１ＬＤＫ・２ＬＤＫ・３ＬＤＫ・４ＬＤＫ・その他"||
|面積（㎡）|"登記簿に記載されている専有部分の床面積(㎡)（壁その他の区画の内側で測定（内定）された面積）を採用しています。
いずれの場合も、10㎡未満の小規模な面積の物件については公表していません。
なお、200㎡未満は「５㎡刻み」、200㎡以上は上位３桁目を四捨五入し上位２桁を表示、2,000㎡以上の大規模取引は「2,000㎡以上」（ただし、「農地」「林地」の場合は5,000㎡以上の大規模取引について「5,000㎡以上」）と表示しています。"||
|土地の形状|土地のおおよその形状を「正方形」、「ほぼ正方形」、「長方形」、「ほぼ長方形」、「台形」、「ほぼ台形」、「不整形」、「ほぼ整形」、「袋地等」の別に表示　※本データではnull||
|間口|土地の接道幅（m）（土地が道路に接している長さ）　※本データではnull||
|延床面積（㎡）|延床面積(㎡)　※本データではnull||
|建築年|"当該建物の建築年を表示しています。
なお、1945年以前は「戦前」と表示されます。また、建築年が把握できないものは、空欄になっています。"||
|建物の構造|"当該建物の構造を次の略号で表示しています。
なお、構造が把握できないものは、空欄になっています。
鉄骨鉄筋コンクリート造 : ＳＲＣ
鉄筋コンクリート造 : ＲＣ
鉄骨造 : 鉄骨造
軽量鉄骨造 : 軽量鉄骨造
ブロック造 : ブロック造
木造 : 木造"||
|用途|"利用の現況を表示しています。
なお、複合用途の場合は列記しています。また、用途が把握できないものは、空欄になっています。
例）
住宅・事務所・店舗・工場・倉庫・作業場・駐車場・その他（ホテル・旅館、文教用施設、宗教用施設、病院等）"||
|今後の利用目的|"今後予定されている利用目的を表示しています。
なお、利用目的が把握できないものは、空欄になっています。
例）
住宅・店舗・事務所・工場・倉庫・その他（学校・文化施設、病院・福祉施設、駐車場等）"||
|前面道路：方位|"土地が接面する前面道路の方位。
なお、前面道路が把握できないものは、空欄になっています。"||
|前面道路：種類|	"土地が接面する前面道路の種類。
なお、前面道路が把握できないものは、空欄になっています。
道路の種類については、以下に区分して表示しています。
道路法上の道路は「国道」、「都道府県道」、「市町村道」等
土地区画整理事業施行地区内の道路は、「区画街路」
私人が管理する道で、いわゆる私道と称されているものは、「私道」
その他の道は、「道路」"||
|前面道路：幅員（ｍ）|"土地が接面する前面道路の幅員（ｍ）。
なお、前面道路が把握できないものは、空欄になっています。"||
|都市計画|"都市計画法上の用途地域などを次の略号で表示しています。
なお、都市計画が把握できないものは、空欄になっています。
第一種低層住居専用地域 : １低住専
第二種低層住居専用地域 : ２低住専
第一種中高層住居専用地域 : １中住専
第二種中高層住居専用地域 : ２中住専
第一種住居地域 : １種住居
第二種住居地域 : ２種住居
準住居地域 : 準住居
田園住居地域 : 田園住居
近隣商業地域 : 近隣商業
商業地域 : 商業
準工業地域 : 準工業
工業地域 : 工業
工業専用地域 : 工業専用
市街化調整区域 : 調整区域
市街化区域及び市街化調整区域外の都市計画区域 : 非線引き
準都市計画区域 : 準都計
都市計画区域外 : 都計外"||
|建ぺい率（％）|指定建ぺい率（％）。把握できないものは、空欄になっています。||
|容積率（％）|指定容積率（％）。把握できないものは、空欄になっています。||
|取引時点|取引当事者への調査により得られた売買契約日を、また、売買契約日が不詳の場合には登記簿に記載されている登記原因日を四半期（３ヶ月）単位で表示||
|改装|改装状況を表示しています。 改装したものは「改装済」、改装していないものは「未改装」を表示しています。 なお、改装状況が把握できないものは、空欄になっています。||
|取引の事情等|取引にあたって価格に影響があると思われる追加情報を表示しています。アンケート調査の結果、追加情報が把握できた場合のみ表示しておりますのでご注意ください。||
|取引価格（総額）_log|"取引の総額（円）の常用対数。
取引の総額（円）は、仲介手数料等の諸費用は含みません。"||


## Log
### ~20220110
- join!!
- udemy講座通りにノートブックを作成し、提出。↓
- nb01
  - とりあえず作成してsubmitした。
- nb02
  - クロスバリデーションを実施。
  - 都道府県の地価ランキングを特徴量に導入。
  - 同じコンペ？(評価方法がrmse)のが[こちら](https://comp.probspace.com/topics/Oregin-Post8b7bae773e3db3bbba97)にあった。

### 20210110
- git/githubの仕組みを作成。今回のコンペ用ディレクトリ毎git/githubで管理する仕組みに。
- READMEの作成


